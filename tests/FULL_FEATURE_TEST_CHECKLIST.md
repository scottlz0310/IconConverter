# 全機能テストチェックリスト

## タスク14.1: 全機能テスト

このドキュメントは、Electron化されたIconConverterアプリケーションの全機能テストのチェックリストです。

**要件**: 3.1, 3.2, 5.1, 5.2, 5.3, 9.4

---

## 1. プラットフォーム互換性テスト

### Windows 10/11（要件5.1）

- [ ] アプリケーションが正常に起動する
- [ ] ウィンドウが正しく表示される
- [ ] ファイルダイアログが動作する
- [ ] ファイル関連付けが機能する
- [ ] システムトレイが動作する
- [ ] インストーラーが正常に動作する
- [ ] アンインストールが正常に動作する
- [ ] 自動更新が機能する

**テスト環境**:

- Windows 10 (x64)
- Windows 11 (x64)

### macOS 12以降（要件5.2）

- [ ] アプリケーションが正常に起動する
- [ ] ウィンドウが正しく表示される
- [ ] ファイルダイアログが動作する
- [ ] ファイル関連付けが機能する
- [ ] システムトレイが動作する
- [ ] DMGインストーラーが正常に動作する
- [ ] アプリケーションの削除が正常に動作する
- [ ] 自動更新が機能する
- [ ] Gatekeeper検証をパスする
- [ ] 公証（Notarization）が完了している

**テスト環境**:

- macOS 12 Monterey (x64)
- macOS 12 Monterey (arm64)
- macOS 13 Ventura (x64)
- macOS 13 Ventura (arm64)
- macOS 14 Sonoma (arm64)

### Ubuntu 20.04以降（要件5.3）

- [ ] アプリケーションが正常に起動する
- [ ] ウィンドウが正しく表示される
- [ ] ファイルダイアログが動作する
- [ ] ファイル関連付けが機能する
- [ ] システムトレイが動作する
- [ ] AppImageが正常に動作する
- [ ] DEBパッケージが正常にインストールできる
- [ ] RPMパッケージが正常にインストールできる
- [ ] アンインストールが正常に動作する

**テスト環境**:

- Ubuntu 20.04 LTS (x64)
- Ubuntu 22.04 LTS (x64)
- Ubuntu 24.04 LTS (x64)

---

## 2. コア機能テスト（要件1.1-1.5）

### 画像形式サポート（要件1.1）

- [ ] PNG画像の読み込みと変換
- [ ] JPEG画像の読み込みと変換
- [ ] BMP画像の読み込みと変換
- [ ] GIF画像の読み込みと変換
- [ ] TIFF画像の読み込みと変換
- [ ] WebP画像の読み込みと変換

### ICO生成（要件1.2）

- [ ] 16x16ピクセルのアイコン生成
- [ ] 32x32ピクセルのアイコン生成
- [ ] 48x48ピクセルのアイコン生成
- [ ] 64x64ピクセルのアイコン生成
- [ ] 128x128ピクセルのアイコン生成
- [ ] 256x256ピクセルのアイコン生成
- [ ] 6つのサイズが1つのICOファイルに含まれる

### 透明度保持（要件1.3）

- [ ] PNG画像の透明度が保持される
- [ ] GIF画像の透明度が保持される
- [ ] WebP画像の透明度が保持される

### 自動背景除去（要件1.4）

- [ ] 単色背景の自動検出
- [ ] 背景色の自動除去
- [ ] オプションのオン/オフ切り替え

### プレビュー表示（要件1.5）

- [ ] アップロード前のプレビュー表示
- [ ] 変換後のプレビュー表示
- [ ] 各サイズのプレビュー表示

---

## 3. デスクトップ統合機能テスト（要件2）

### ファイル関連付け（要件2.1, 2.5）

- [ ] 右クリックメニューに「ICOに変換」が表示される
- [ ] 右クリックメニューからアプリが起動する
- [ ] ファイルパスが正しく渡される
- [ ] 複数ファイルの処理が可能

### システムトレイ（要件2.2）

- [ ] システムトレイアイコンが表示される
- [ ] トレイメニューが表示される
- [ ] ウィンドウの表示/非表示切り替え
- [ ] バックグラウンド実行
- [ ] クイック変換機能
- [ ] 変換完了通知

### ネイティブダイアログ（要件2.3）

- [ ] ファイル選択ダイアログが表示される
- [ ] ファイル保存ダイアログが表示される
- [ ] 複数ファイル選択が可能
- [ ] フィルター機能が動作する

### ドラッグ&ドロップ（要件2.4）

- [ ] デスクトップからのドラッグ&ドロップ
- [ ] エクスプローラー/Finderからのドラッグ&ドロップ
- [ ] 複数ファイルのドラッグ&ドロップ
- [ ] 無効なファイルの拒否

---

## 4. オフライン動作テスト（要件3.1, 3.2）

### オフラインモード（要件3.1）

- [ ] インターネット接続なしで起動
- [ ] インターネット接続なしで画像変換
- [ ] インターネット接続なしで設定変更
- [ ] すべての機能がオフラインで動作

### ローカル処理（要件3.2）

- [ ] 画像変換がローカルで完結
- [ ] 外部APIへの通信がない
- [ ] ネットワークエラーが発生しない

### ローカル設定（要件3.3）

- [ ] 設定がローカルに保存される
- [ ] アプリ再起動後も設定が保持される
- [ ] 設定のインポート/エクスポート

---

## 5. パフォーマンステスト（要件4）

### 起動時間（要件4.1）

- [ ] コールドスタート: 3秒以内
- [ ] ウォームスタート: 2秒以内
- [ ] スプラッシュスクリーンの表示
- [ ] スムーズなフェードイン

**測定方法**:

```bash
npm run test:performance -- --grep "起動時間"
```

### 変換処理時間（要件4.2）

- [ ] 1MB画像: 2秒以内
- [ ] 5MB画像: 5秒以内
- [ ] 10MB画像: 10秒以内
- [ ] バッチ処理の効率性

**測定方法**:

```bash
npm run test:performance -- --grep "変換処理時間"
```

### メモリ使用量（要件4.3）

- [ ] アイドル状態: 200MB以下
- [ ] 変換処理中: 300MB以下
- [ ] メモリリークがない
- [ ] ガベージコレクションが適切に動作

**測定方法**:

```bash
npm run test:performance -- --grep "メモリ使用量"
```

### CPU使用率（要件4.4）

- [ ] アイドル状態: 5%未満
- [ ] 変換処理中: 適切な範囲内
- [ ] バックグラウンド実行時: 1%未満

**測定方法**:

```bash
npm run test:performance -- --grep "CPU使用率"
```

---

## 6. セキュリティテスト（要件6）

### コード署名（要件6.1）

- [ ] Windows: コード署名証明書
- [ ] macOS: Apple Developer証明書
- [ ] Linux: 署名なし（オプション）
- [ ] すべての配布パッケージに署名

### 最小権限（要件6.2）

- [ ] Node.js統合が無効
- [ ] コンテキスト分離が有効
- [ ] リモートモジュールが無効
- [ ] 必要最小限の権限のみ

### 自動更新（要件6.3）

- [ ] セキュアな更新チェック
- [ ] 署名検証
- [ ] 更新通知の表示
- [ ] 安全な再起動

### ファイル検証（要件6.4）

- [ ] MIME type検証
- [ ] ファイルヘッダー検証
- [ ] ファイルサイズ制限（10MB）
- [ ] 拡張子検証

### 入力保護（要件6.5）

- [ ] パストラバーサル対策
- [ ] SQLインジェクション対策（該当なし）
- [ ] XSS対策
- [ ] 悪意のあるファイルの拒否

---

## 7. UI/UXテスト（要件7）

### UI一貫性（要件7.1）

- [ ] WebUI版とのデザイン一致
- [ ] レイアウトの一貫性
- [ ] カラースキームの一致
- [ ] フォントの一致

### レスポンシブレイアウト（要件7.2）

- [ ] ウィンドウリサイズ対応
- [ ] 最小サイズ制約（800x600）
- [ ] 最大化/最小化動作
- [ ] 全画面モード

### アクセシビリティ（要件7.3）

- [ ] WCAG 2.1 AA準拠
- [ ] スクリーンリーダー対応
- [ ] 高コントラストモード
- [ ] フォーカスインジケーター

### キーボードナビゲーション（要件7.4）

- [ ] Tabキーでのフォーカス移動
- [ ] Enterキーでの実行
- [ ] Escキーでのキャンセル
- [ ] ショートカットキー

### 国際化準備（要件7.5）

- [ ] 日本語UI
- [ ] 英語UI（準備）
- [ ] 言語切り替え機能
- [ ] ロケール対応

---

## 8. WebUI版との機能パリティ（要件9.4）

### コア機能の一致

- [ ] 画像変換機能
- [ ] 透明度保持機能
- [ ] 自動背景除去機能
- [ ] プレビュー表示機能
- [ ] ファイル選択機能
- [ ] ファイル保存機能

### 処理精度の一致（要件9.5）

- [ ] 変換結果がWebUI版と同等
- [ ] 画質が同等
- [ ] ファイルサイズが同等
- [ ] 処理時間が同等またはそれ以下

---

## 9. 統合テスト

### エンドツーエンドフロー

- [ ] ファイル選択 → 変換 → 保存
- [ ] ドラッグ&ドロップ → 変換 → 保存
- [ ] 右クリックメニュー → 変換 → 保存
- [ ] バッチ変換フロー

### エラーハンドリング

- [ ] 無効なファイル形式のエラー表示
- [ ] ファイルサイズ超過のエラー表示
- [ ] ディスク容量不足のエラー表示
- [ ] 権限エラーの適切な処理

### 設定の永続化

- [ ] テーマ設定の保存
- [ ] 言語設定の保存
- [ ] ファイル関連付け設定の保存
- [ ] 自動更新設定の保存

---

## 10. 配布パッケージテスト（要件11.2）

### パッケージサイズ

- [ ] Windows: 200MB以下
- [ ] macOS: 200MB以下
- [ ] Linux: 200MB以下

### インストーラー

- [ ] Windows NSIS: 正常にインストール
- [ ] Windows Portable: 正常に起動
- [ ] macOS DMG: 正常にインストール
- [ ] macOS ZIP: 正常に展開・起動
- [ ] Linux AppImage: 正常に起動
- [ ] Linux DEB: 正常にインストール
- [ ] Linux RPM: 正常にインストール

---

## テスト実行方法

### 自動テスト実行

```bash
# すべての全機能テストを実行
./tests/run-full-feature-test.sh

# 統合テストのみ実行
npx playwright test tests/integration/full-feature-test.spec.js

# パフォーマンステストのみ実行
npm run test:performance
```

### 手動テスト実行

1. アプリケーションをビルド

   ```bash
   npm run build
   npm run electron:build
   ```

2. 各プラットフォームでインストーラーを実行

3. このチェックリストに従って手動テストを実施

4. 結果を記録

---

## テスト結果の記録

### テスト実行日

- 実行日: _______________
- 実行者: _______________
- バージョン: _______________

### プラットフォーム

- [ ] Windows 10 (x64)
- [ ] Windows 11 (x64)
- [ ] macOS 12+ (x64)
- [ ] macOS 12+ (arm64)
- [ ] Ubuntu 20.04+ (x64)

### 総合評価

- 成功したテスト数: _____ / _____
- 失敗したテスト数: _____ / _____
- スキップしたテスト数: _____ / _____

### 備考

```
（テスト中に発見した問題や特記事項を記載）
```

---

## 成功基準

すべてのテストが以下の基準を満たす必要があります:

### 機能基準

- ✓ WebUI版の全機能が正常動作
- ✓ 変換精度がWebUI版と同等
- ✓ ファイル関連付けが正常動作
- ✓ オフライン動作の確認
- ✓ 6つのアイコンサイズ同時生成
- ✓ 透明度保持・自動背景除去

### パフォーマンス基準

- ✓ 起動時間3秒以内
- ✓ 5MB画像を5秒以内で変換
- ✓ メモリ使用量200MB以下
- ✓ CPU使用量5%未満
- ✓ パッケージサイズ200MB以下

### 品質基準

- ✓ 自動テスト通過率100%
- ✓ セキュリティスキャン脆弱性0件
- ✓ 3プラットフォームでの動作確認
- ✓ コード署名の実装
- ✓ 最小限のシステム権限

### ユーザビリティ基準

- ✓ UI/UXがWebUI版と同等
- ✓ WCAG 2.1 AAアクセシビリティ準拠
- ✓ キーボードナビゲーション対応
- ✓ レスポンシブレイアウト
- ✓ 国際化対応準備

---

## 次のステップ

全機能テストが完了したら:

1. テスト結果をドキュメント化
2. 発見された問題を修正
3. 再テストを実施
4. タスク14.2（ドキュメント整備）に進む
5. タスク14.3（リリース実行）に進む
